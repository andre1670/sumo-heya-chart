<!DOCTYPE HTML>
    <html>
    <head>  
    <script>
    window.onload = function () {
    
    for (var i = 1; i < 3; i++) {
        this["dataPoints"+i] = [];
    }
    //var dataPoints1 = [];
    //var dataPoints2 = [];
     
    var chart = new CanvasJS.Chart("chartContainer", {
        animationEnabled: false,
        exportEnabled: true,
        title: {
            text: "Description"
        },
        axisY: {
            title: "rikishi"
        },
        axisX: {
            title: "basho"
        },
        legend: {
            cursor: "pointer",
            itemmouseover: function(e) {
                e.dataSeries.lineThickness = e.chart.data[e.dataSeriesIndex].lineThickness * 2;
                e.dataSeries.markerSize = e.chart.data[e.dataSeriesIndex].markerSize + 2;
                e.chart.render();
            },
            itemmouseout: function(e) {
                e.dataSeries.lineThickness = e.chart.data[e.dataSeriesIndex].lineThickness / 2;
                e.dataSeries.markerSize = e.chart.data[e.dataSeriesIndex].markerSize - 2;
                e.chart.render();
            },
            itemclick: function (e) {
                if (typeof (e.dataSeries.visible) === "undefined" || e.dataSeries.visible) {
                    e.dataSeries.visible = false;
                } else {
                    e.dataSeries.visible = true;
                }
                e.chart.render();
            }
        },
        data: [{
            type: "spline",
            //toolTipContent: "{x}: {y} rikishi",
            xValueFormatString: "####.##",
            yValueFormatString: "Dewanoumi ## rikishi",
            showInLegend: true,
            name: "Dewanoumi",
            dataPoints: dataPoints1
        },
        {
            type: "spline",
            //toolTipContent: "{x}: {y} rikishi",
            xValueFormatString: "####.##",
            yValueFormatString: "Fujishima ## rikishi",
            showInLegend: true,
            name: "Fujishima",
            dataPoints: dataPoints2
        }
        ]
    });
     
    $.get("https://raw.githubusercontent.com/andre1670/sumo-heya-chart/main/chart.csv", getDataPointsFromCSV);
     
    //CSV Format
    function getDataPointsFromCSV(csv) {
        var csvLines = points = date = rikishi1 = rikishi2 = [];
        csvLines = csv.split(/[\r?\n|\r|\n]+/);

        for (var i = 329; i < csvLines.length; i++) {
            if (csvLines[i].length > 0) {
                points = csvLines[i].split(",");
                date = points[0].split(".");
                rikishi1 = points[1].split("-");
                rikishi2 = points[2].split("-");
                dataPoints1.push({
                    label: points[0],
                    y: parseInt(rikishi1[0])
                });
                dataPoints2.push( {
                    label: points[0],
                    y: parseInt(rikishi2[0])
                
                });
            }
        }
        
        chart.render();
    }

    /*function addDataPoint(legendText,xValue,yValue){
        var tempX = xValue.split("/");
        var xData = new Date(tempX[0],tempX[1],tempX[2],tempX[3]);
        var yData = parseInt(yValue);
        var dataFlag = false;
        for(var i=0;i<data.length;i++){
            if(data[i].legendText == legendText){
                data[i].dataPoints.push({x:xData, y:yData});
                dataFlag = true;
            }
        }
        if(!dataFlag){
            data.push({
                type : "column",
                showInLegend : true,
                legendText : legendText,
                axisYType: "secondary",
                dataPoints : [
                    {x: xData, y:yData}
                ]
            });
        }
    }
    $("#chartType").change(function () {     
        var selectedChartType = $("#chartType option:selected").text();
        chart.options.data[0].type = selectedChartType;
        chart.options.title.text = "Basic" +" "+ selectedChartType +" "+ "chart";
        chart.render();
    })
    function toggleDataSeries(e) {
    if(typeof(e.dataSeries.visible) === "undefined" || e.dataSeries.visible) {
        e.dataSeries.visible = false;
    }
    else {
        e.dataSeries.visible = true;            
    }
    chart.render();
    }*/

    }


    </script>
    </head>
    <body>
    <div id="chartContainer" style="height: 400px; width: 100%;"></div>
    <script type="text/javascript" src="https://canvasjs.com/assets/script/jquery-1.11.1.min.js"></script>
    <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
    </body>
    </html>      